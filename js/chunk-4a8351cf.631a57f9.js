(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a8351cf"],{"326a":function(e,t){e.exports={messages:{CN:{content:"演示页面",description:"这是一个演示页面"},HK:{content:"演示頁面",description:"這是一個演示頁面"},US:{content:"Demo Page",description:"This is a demo page"}}}},"343c":function(e,t,i){},a70c:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"culturalinfo-page"},[i("div",{staticClass:"mybtn",on:{click:e.switchScence}},[e._v("switch")]),i("div",{staticClass:"mybtn mybtn1",on:{click:e.loadGeojson}},[e._v("cityBuilding")]),i("div",{staticClass:"mybtn mybtn2",on:{click:e.SHEarth}},[e._v("hideEarth")]),i("earthsdk")],1)},n=[],a=(i("d3b7"),i("ddb0"),i("0256")),r=(i("5fca"),i("ca00")),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"earthContainer",staticClass:"mymap",attrs:{id:"earthContainer"}})},c=[],l=i("4360"),u=i("5530"),d=(i("a4d3"),i("e01a"),i("b0c0"),{SceneLayer:function(e){var t={name:e.name,arg:e,type:"SceneLayer",ImageryLayer:viewer.imageryLayers.addImageryProvider(new Cesium.UrlTemplateImageryProvider({url:e.url,minimumLevel:e.minimumLevel||0,maximumLevel:e.maximumLevel||void 0}))};return e.style&&(t.ImageryLayer.brightness=e.style.brightness||1,t.ImageryLayer.contrast=e.style.contrast||1,t.ImageryLayer.saturation=e.style.saturation||1,t.ImageryLayer.gamma=e.style.gamma||1,t.ImageryLayer.hue=e.style.hue||0),t},Map:function(e){return{map:"",id:"",name:"",children:[],addlayer:function(e){}}},GeoPoint:function(e){var t,o=function(t){return{image:{image:e.renderer.url||i("e0ac"),verticalOrigin:Cesium.VerticalOrigin[e.renderer.VerticalOrigin]||Cesium.VerticalOrigin.TOP,scale:e.renderer.size||1},vector:{}}[t]},n=viewer.entities.add({name:e.name,description:e.type,arg:e,position:e.coordinates?Cesium.Cartesian3.fromDegrees(e.coordinates[0],e.coordinates[1],e.offsetHeight||0,e.ellipsoid,e.result):new Cesium.Cartesian3(e.position[0],e.position[1],e.position[2]),point:{pixelSize:1,outlineWidth:0},billboard:o(e.renderer.type),label:{text:e.label.text,style:Cesium.LabelStyle.FILL_AND_OUTLINE,font:e.label.fontSize+"px "+e.label.fontFamily,fillColor:("string"===typeof e.label.fontColor?Cesium.Color.fromCssColorString(e.label.fontColor):Cesium.Color.fromBytes(e.label.fontColor[0],e.label.fontColor[1],e.label.fontColor[2],255))||Cesium.Color.WHITE,outlineColor:e.label.outlineColor||Cesium.Color.BLACK,outlineWidth:e.label.outlineWidth||4,scale:1,pixelOffset:new Cesium.Cartesian2(e.label.offset[0]||0,-e.label.offset[1]||-20),verticalOrigin:Cesium.VerticalOrigin.BOTTOM,horizontalOrigin:Cesium.HorizontalOrigin.CENTER}}),a=function(e){t=document.createElement("div");var i='<div class="defaultWin"></div>';e.customHtml&&(i=e.customHtml),t.setAttribute("id",n.id),t.setAttribute("class","geopoint_dialog"),t.innerHTML=i,t.style.position="absolute",t.style.zIndex="9999",t.style.display="none",r(e),document.body.appendChild(t)};function r(e){var i=Cesium.SceneTransforms.wgs84ToWindowCoordinates(viewer.scene,n.position._value),o=i.x,a=i.y,r=0,s=0;e&&e.offset&&(r=e.offset[0],s=e.offset[1]),t.style.left=o-t.offsetWidth/2+r+"px",t.style.top=a-t.offsetHeight+s+"px"}return e.infoWindow&&(a(e.infoWindow),viewer.camera.changed.addEventListener((function(i){"block"===t.style.display&&r(e.infoWindow)}))),n},GeoPolygon:{},baseLayer:{}}),m={setToken:function(e){Cesium.Ion.defaultAccessToken=e},destroy:function(){return viewer&&viewer.destroy(),viewer},globalLoading:function(){},noearth:function(){viewer.scene.skyAtmosphere.show=!1,viewer.scene.globe.show=!1},showearth:function(){viewer.scene.skyAtmosphere.show=!0,viewer.scene.globe.show=!0},earthLoaded:function(e){var t=this;this.globalLoading();var i=0,o=new Cesium.EventHelper;o.add(viewer.scene.globe.tileLoadProgressEvent,(function(n){0==n||n>2&&!i&&(t.globalLoading(0),o.removeAll(),t.rotationSelf(e),i++)}))},rotationSelf:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,i=Date.now();function o(){var e=1.5,t=Date.now(),o=(t-i)/1e3;i=t,viewer.scene.camera.rotate(Cesium.Cartesian3.UNIT_Z,-e*o)}viewer.clock.onTick.addEventListener(o),setTimeout((function(){viewer.clock.onTick.removeEventListener(o),e&&e()}),t)},App:function(e){o&&this.destroy();var t={animation:!1,fullscreenButton:!1,vrButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,baseLayerPicker:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,scene3DOnly:!0,skyBox:i()};function i(){return!(!e||!e.skyBox)&&new Cesium.SkyBox({sources:{positiveX:e.skyBox,negativeX:e.skyBox,positiveY:e.skyBox,negativeY:e.skyBox,positiveZ:e.skyBox,negativeZ:e.skyBox}})}var o=new Cesium.Viewer("earthContainer",Object(u["a"])({},t));function n(){o.camera.percentageChanged=0,o._cesiumWidget._creditContainer.style.opacity=0}function a(){o.imageryLayers.get(0).show=!1}return window.viewer=o,this.setMouseConfig(e),n(),e&&e.url||a(),e&&(e.complete&&e.complete(),e.url&&(this.noearth(),this.loadSceneDirectly(e.url)),e.background&&(o.scene.backgroundColor=e.background)),this.mapClick(),o},build:function(e){var t=d[e.type](e);return l["a"].commit("props/Mulayers",{val:t,type:e.type}),e.complete&&e.complete(),t},setMouseConfig:function(e){e&&e.url?(viewer.scene.screenSpaceCameraController.tiltEventTypes=[Cesium.CameraEventType.LEFT_DRAG],viewer.scene.screenSpaceCameraController.rotateEventTypes=[Cesium.CameraEventType.RIGHT_DRAG],viewer.scene.screenSpaceCameraController.minimumZoomDistance=1):(viewer.scene.screenSpaceCameraController.tiltEventTypes=[Cesium.CameraEventType.RIGHT_DRAG,Cesium.CameraEventType.PINCH,{eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.CTRL},{eventType:Cesium.CameraEventType.RIGHT_DRAG,modifier:Cesium.KeyboardEventModifier.CTRL}],viewer.scene.screenSpaceCameraController.minimumZoomDistance=30),viewer.scene.screenSpaceCameraController.zoomEventTypes=[Cesium.CameraEventType.MIDDLE_DRAG,Cesium.CameraEventType.WHEEL,Cesium.CameraEventType.PINCH]},earthflyto:function(e){viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(117.209859,39.078475,15e3)})},mapClick:function(e){var t=this,i=viewer.canvas,o={};i.onclick=function(e){o.x=e.offsetX,o.y=e.offsetY;var i=viewer.scene.pick(o);i&&i.id&&Object(r["b"])(viewer.entities.values,(function(e){i.id===e&&t.showPointDialog(e)}))}},loadSceneDirectly:function(e,t){var i=this,o=new Cesium.Cesium3DTileset({url:e});return o.readyPromise.then((function(e){viewer.scene.primitives.add(e),i.setMouseConfig({url:1}),viewer.zoomTo(e,new Cesium.HeadingPitchRange(0,-.5,0)),viewer.camera.lookAt(e.boundingSphere.center),t&&t()})).otherwise((function(e){})),o},coordinateTrans:function(e){var t=Cesium.Ellipsoid.WGS84.cartesianToCartographic(e);return{lng:Cesium.Math.toDegrees(t.longitude),lat:Cesium.Math.toDegrees(t.latitude),height:t.height}},showPointDialog:function(e){if("GeoPoint"===e.description._value){var t=document.getElementById(e.id);$(".geopoint_dialog").css("display","none");var i=Cesium.SceneTransforms.wgs84ToWindowCoordinates(viewer.scene,e.position._value),o=i.x,n=i.y;t.style.display="block";var a=0,r=0;e.arg.infoWindow&&e.arg.infoWindow.offset&&(a=e.arg.infoWindow.offset[0],r=e.arg.infoWindow.offset[1]),t.style.left=o-t.offsetWidth/2+a+"px",t.style.top=n-t.offsetHeight+r+"px"}}};m.setToken("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlN2U0OGE3OC02YTUzLTQ3NzItYTlmNy0zYzdiMWIzZWVlMzQiLCJpZCI6Njc3MDIsImlhdCI6MTY0MDI0MzYxN30.REKR-wcWVnrgrmlUJh4CLJK509tSTlHPmJeHLmFREl0");var f={name:"earthsdk",props:{},data:function(){return{_earth:void 0}},mounted:function(){this.$nextTick((function(){"undefined"!==typeof XE&&alert("no cesium")}))},beforeDestroy:function(){m.destroy(),this._earth=this._earth&&this._earth.destroy()},methods:{}},p=f,h=(i("e8933"),i("2877")),y=Object(h["a"])(p,s,c,!1,null,"85fe4802",null),v=y.exports,g={beijing:"https://www.thingjs.com/pp/9b0a5094ce3d78ca4c6c52dc",huairou:"https://www.thingjs.com/pp/13a3689ddc2b301e9e867a2a",changping:"https://www.thingjs.com/pp/aeec697409cbba662ff5f3ce",daxing:"https://www.thingjs.com/pp/7bbcbeb885ebd2f38fc42bdb",tongzhou:"https://www.thingjs.com/pp/dbc271b3a9f021a745721e6d",miyun:"https://www.thingjs.com/pp/b8c8e6c7faedab4db466edb9",pinggu:"https://www.thingjs.com/pp/ddbd08ef2a3fa3461cb8bbea",shunyi:"https://www.thingjs.com/pp/edc1ddf0bdfbf11e3204875d",fangshan:"https://www.thingjs.com/pp/16a4959598151af1e684b409",mentougou:"https://www.thingjs.com/pp/2ef3419bdc83675678b1932e",yanqing:"https://www.thingjs.com/pp/da9f0f1220b6959036f46ff1"},w={name:"culturalinfo",i18n:i("326a"),components:{pageBlock:a["a"],earthsdk:v},data:function(){return{loading:!1,iframeName:"beijing",iframeUrls:g,isTrue:!0,viewer:null,showEarth:!0,tileset:null,geoDataSource:null}},mounted:function(){var e=this;this.$nextTick((function(){e.viewer=m.App({}),e.addMaplayer()}))},beforeDestroy:function(){},methods:{SHEarth:function(){this.showEarth=!this.showEarth,this.showEarth?m.showearth():m.noearth(),this.showEarth?this.geoDataSource.show=!0:this.geoDataSource.show=!1},switchScence:function(){this.tileset&&this.tileset.destroy(),this.tileset=m.loadSceneDirectly("https://lab.earthsdk.com/model/d16c1ce0ac2d11e99dbd8fd044883638/tileset.json")},loadEarthMoudle:function(){var e=this;m.earthLoaded((function(){viewer.camera.flyTo({destination:{x:-2186031.7577789742,y:4397180.281290082,z:4080647.1520843897},duration:1.5,complete:function(){e.$nextTick((function(){e.loadGeojson()}))}})}))},addMaplayer:function(){m.build({type:"SceneLayer",name:"高德地图瓦片",url:"https://webst02.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}"}),m.build({type:"SceneLayer",name:"高德影像标注",url:"https://webst01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",complete:function(e){}})},loadGeojson:function(){var e=this;if(viewer.dataSources.length)viewer.dataSources.removeAll();else{var t="/vue-cesium-demo/";this.$nextTick((function(){var i=Cesium.GeoJsonDataSource.load(t+"dgeojson.geojson",{stroke:Cesium.Color.AQUAMARINE,fill:Cesium.Color(100,100,100,.6)});i.then((function(t){e.geoDataSource=t,viewer.dataSources.add(t),viewer.flyTo(t);var i=t.entities.values;Object(r["b"])(i,(function(e){e.polygon.extrudedHeight=e.properties.height._value}))}))}))}},createGoePoint:function(){for(var e,t=[],o=0;o<10;o++)t.push({longitude:116.396672+Math.random()*o/100,latitude:39.90778+Math.random()*o/200,height:0,value:0});t.forEach((function(t,o){e=m.build({type:"GeoPoint",name:t.longitude+"_GeoPoint",label:{text:t.longitude+"_name",offset:[0,14],fontColor:[0,255,255],fontSize:22,fontFamily:"Microsoft YaHei"},coordinates:[t.longitude,t.latitude],renderer:{type:"image",url:i("e0ac"),size:1,keepSize:!0,alwaysOnTop:!0},infoWindow:{customHtml:'<div style="width: 200px; height: 100px;background-color: #fff; font-size: 20px; font-weight: bold;">我是弹框</div>',offset:[0,0,0]}}),t._entity=e}))}}},C=w,b=(i("f25e"),Object(h["a"])(C,o,n,!1,null,"4f5aa77b",null)),T=b.exports;t["default"]=T},d01c:function(e,t,i){},e8933:function(e,t,i){"use strict";i("343c")},f25e:function(e,t,i){"use strict";i("d01c")}}]);